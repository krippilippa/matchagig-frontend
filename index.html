<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>MatchaGig - Resume Matching Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Favicon to prevent 404 errors -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìÑ</text></svg>">
  <!-- External CSS -->
  <link rel="stylesheet" href="css/styles.css">
  <!-- JSZip in browser to make a zip from PDFs -->
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <!-- Marked.js for Markdown parsing -->
  <script src="https://cdn.jsdelivr.net/npm/marked@4.3.0/marked.min.js"></script>
  <!-- PostHog Analytics -->
  <script>
    !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister unregister_for_session getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty createPersonProfile opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing debug".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
    posthog.init('phc_RzX0Ft7S8gwvRm7Uxc9CSVkbiF85KIaejKAPYia9003', { api_host: 'https://us.i.posthog.com', defaults: '2025-05-24' })
  </script>
</head>
<body>
  <div class="app">
    <!-- New Landing Page Layout -->
    <div id="landingPage" class="landing-page">
      <div class="landing-container">
        <!-- Hero Section -->
        <div class="hero-section">
          <h1 class="hero-title">DEMO 1.0</h1>
          <h1 class="hero-title">Find your top candidates in minutes.</h1>
          <p class="hero-subtitle">Upload r√©sum√©s, paste a job description, get ranked matches and chat with CVs.</p>
        </div>

        <!-- Sample Data Button -->
        <div class="sample-data-section">
          <button id="useSampleDataBtn" class="sample-data-btn">üöÄ Try with Sample Data (7 resumes)</button>
        </div>
        
        <div class="upload-section">
          <div class="upload-box">
            <h3>Upload R√©sum√©s</h3>
            <div class="upload-area" id="uploadArea">
              <div class="upload-text">
                <strong>Drag & drop r√©sum√©s here (PDF)</strong><br>
                or click to select files. We never save your files.
              </div>
              <input type="file" id="landingPdfInput" accept="application/pdf" multiple style="display: none;" />
            </div>
          </div>
          
          <div class="jd-box">
            <h3>Paste Job Description</h3>
            <textarea id="landingJdText" rows="8" placeholder="Paste your job description here..."></textarea>
          </div>
        </div>
        
        <div class="run-match-section">
          <button id="runMatchBtn" class="run-match-btn">Run Match</button>
          <div id="progress" style="margin-top:6px; font-size:12px; color:#555;"></div>
        </div>

        <!-- Privacy Note -->
        <div class="privacy-note">
          <p>GDPR Compliant - Resumes are never stored or shared.</p>
        </div>
      </div>
    </div>

    <!-- Existing Interface (Hidden Initially) -->
    <div id="mainInterface" class="main-interface" style="display: none;">
      <div class="interface-header">
        <button id="backToDemoBtn" class="back-btn">‚Üê Start Over With New Resumes and JD</button>
        <a href="https://forms.gle/KLq18mqCjEEVKTcY7" target="_blank" class="survey-btn">Take Survey</a>
      </div>
      <div class="interface-content">
        <aside class="left">
          <div class="toolbar">
            <input type="file" id="pdfInput" accept="application/pdf" multiple style="display: none;" />
            <label for="jdText">Job Description:</label>
            <div id="jobTitleDisplay" class="job-title-display">No job title available</div>
            <div id="jdStatus" style="display: none;"></div>
            <input id="jdHash" type="hidden" />
            <div id="status"></div>
          </div>

          <div class="list" id="list"></div>
        </aside>

        <main class="right">
          <div class="viewer-header">
            <h3 id="viewerTitle">No candidate selected</h3>
            <div id="viewToggleButtons" style="display: none;">
              <button id="pdfViewBtn" class="view-toggle-btn">PDF View</button>
              <button id="dataViewBtn" class="view-toggle-btn">Data View</button>
            </div>
            <button id="updateJdBtn" class="update-jd-btn" style="display: none;">Update</button>
          </div>
          <div id="jdTextDisplay" class="jd-text-display" style="display: none;">
            <textarea id="jdTextContent" class="jd-text-content" placeholder="Job description text will appear here..."></textarea>
          </div>
          <div id="extractedDataDisplay" class="extracted-data-display" style="display: none;">
            <div id="extractedDataContent"></div>
          </div>
          <iframe id="pdfFrame" class="pdf" height="600"></iframe>
        </main>

        <aside class="chat">
          <div id="chatLog"></div>

          <div id="quickQuestions">
            <button class="quick-question"
            data-question="Give this: 1) Missing must-haves vs the JD (max 3 bullets, write 'not shown in r√©sum√©' when absent). 2) Pros (max 3 bullets). No extra text.">
            Pros/Cons
          </button>
          
          <button class="quick-question"
            data-question="Write a short reach out message making contact with the candidate.">
            Reach Out
          </button>
          
          <button class="quick-question"
            data-question="Give exactly 3 sharp interview questions as bullets, each ‚â§14 words, tailored to the JD gaps you detect in the r√©sum√©. No preface, no rubric, bullets only.">
            Interview questions
          </button>
            <span id="interviewLoadingIndicator" class="loading-indicator" style="display: none;">
              <span class="data-view-spinner">‚è≥</span>
            </span>
          </div>

          <div id="chatInput">
            <textarea id="chatText" rows="3" placeholder="Ask something..."></textarea>
            <button id="btnSend">Send</button>
          </div>
        </aside>
      </div>
    </div>
  </div>

  <script type="module" src="./js/config.js"></script>
  <script type="module" src="./main.js"></script>
</body>
</html>